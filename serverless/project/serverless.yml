service: serverless-playground

frameworkVersion: '3'

provider:
  name: aws
  runtime: python3.8

functions:
  hello:
    handler: handler.hello

# Relevant docs:
# CloudFormation
#   - Log Group Resource: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-logs-loggroup.html
#   - Logs Metric Filter Resource: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-logs-metricfilter.html
# Serverless:
#   - Autogenerated Resource Reference: https://www.serverless.com/framework/docs/providers/aws/guide/resources

resources:
  Resources:
    TestMetricFilter:
      Type: AWS::Logs::MetricFilter
      Properties:
        FilterPattern: '{ $.type = "TEST" }'
        LogGroupName:
          Ref: HelloLogGroup
        MetricTransformations:
          - MetricValue: '$.value'
            MetricNamespace: "ServerlessPlayground/MetricsCategory"
            MetricName: "TestValue"
